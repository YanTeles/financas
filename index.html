<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro Empresarial</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí∞</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>

    <header>
        <h1>Master info</h1>
        <button id="generate-pdf-btn" class="pdf-btn" title="Gerar Relat√≥rio em PDF">üìÑ Relat√≥rio PDF</button>
    </header>

    <div class="container">
        <!-- Cards principais: Entradas, Sa√≠das e Saldo (mantidos) -->
        <section class="balance-container">
            <div class="card">
                <h3>Entradas</h3>
                <p id="money-plus" class="money plus">R$ 0,00</p>
            </div>
            <div class="card">
                <h3>Sa√≠das</h3>
                <p id="money-minus" class="money minus">R$ 0,00</p>
            </div>
            <div class="card total-card">
                <h3>Saldo Atual</h3>
                <p id="balance" class="money">R$ 0,00</p>
            </div>
        </section>

        <!-- Novo bloco para separar dinheiro em caixa e em conta (autom√°tico) -->
        <section class="balance-container">
            <div class="card">
                <h3>Valor em Caixa</h3>
                <p id="cash-balance" class="money">R$ 0,00</p>
            </div>
            <div class="card">
                <h3>Valor na Conta</h3>
                <p id="account-balance" class="money">R$ 0,00</p>
            </div>
            <div class="card total-card">
                <h3>Total</h3>
                <p id="cash-account-total" class="money">R$ 0,00</p>
            </div>
        </section>

        <!-- SE√á√ÉO DE ALERTAS DESTACADA -->
        <section class="alerts-container">
            <div class="alert-card pending-card">
                <h3>üìå Contas a Pagar</h3>
                <p id="pending-total" class="alert-amount">R$ 0,00</p>
                <p id="pending-count" class="alert-info">0 contas pendentes</p>
            </div>
            <div class="alert-card earned-card">
                <h3>üí∞ Servi√ßos n√£o Recebidos</h3>
                <p id="earned-total" class="alert-amount">R$ 0,00</p>
                <p id="earned-count" class="alert-info">0 servi√ßos aguardando</p>
            </div>
        </section>

        <div class="main-grid">

            <section class="form-section">
                <h3>üí∏ Nova Transa√ß√£o</h3>
                <form id="form">
                    <div class="form-control">
                        <label for="text">Descri√ß√£o</label>
                        <input type="text" id="text" placeholder="Ex: Venda de Software" required />
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="amount">Valor (R$)</label>
                            <input type="number" id="amount" placeholder="0.00" step="0.01" required />
                        </div>
                        <div class="form-control">
                            <label for="date">Data</label>
                            <input type="date" id="date" required />
                        </div>
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="type">Tipo</label>
                            <select id="type" required>
                                <option value="income">Entrada (+)</option>
                                <option value="expense">Sa√≠da (-)</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <label for="payment-method">Forma de Pagamento</label>
                            <select id="payment-method" required>
                                <option value="cash">Dinheiro (Caixa)</option>
                                <option value="account">Conta Banc√°ria / Pix / Cart√£o</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="category">Categoria</label>
                            <select id="category" required>
                                <option value="Servi√ßos">Servi√ßos</option>
                                <option value="Ferramentas">Ferramentas</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Impostos">Impostos</option>
                                <option value="Outros">Outros</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn">Adicionar Transa√ß√£o</button>
                </form>
            </section>

            <section class="form-section">
                <h3>üìå Conta Pendente</h3>
                <form id="pending-form">
                    <div class="form-control">
                        <label for="pending-text">Descri√ß√£o</label>
                        <input type="text" id="pending-text" placeholder="Ex: Aluguel do escrit√≥rio" required />
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="pending-amount">Valor (R$)</label>
                            <input type="number" id="pending-amount" placeholder="0.00" step="0.01" required />
                        </div>
                        <div class="form-control">
                            <label for="pending-date">Data de Vencimento</label>
                            <input type="date" id="pending-date" required />
                        </div>
                    </div>

                    <div class="form-control">
                        <label for="pending-category">Categoria</label>
                        <select id="pending-category" required>
                            <option value="D√≠vida">D√≠vida</option>
                            <option value="Servi√ßo">Servi√ßo</option>
                            <option value="Aluguel">Aluguel</option>
                            <option value="Fornecedor">Fornecedor</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>

                    <button type="submit" class="btn" style="background-color: var(--primary);">Adicionar Conta Pendente</button>
                </form>
            </section>

            <section class="form-section">
                <h3>‚úÖ Servi√ßo Realizado</h3>
                <form id="earned-form">
                    <div class="form-control">
                        <label for="earned-text">Descri√ß√£o do Servi√ßo</label>
                        <input type="text" id="earned-text" placeholder="Ex: Desenvolvimento de App" required />
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="earned-amount">Valor (R$)</label>
                            <input type="number" id="earned-amount" placeholder="0.00" step="0.01" required />
                        </div>
                        <div class="form-control">
                            <label for="earned-date">Data do Servi√ßo</label>
                            <input type="date" id="earned-date" required />
                        </div>
                    </div>

                    <div class="form-control">
                        <label for="earned-client">Cliente</label>
                        <input type="text" id="earned-client" placeholder="Ex: Empresa XYZ" required />
                    </div>

                    <button type="submit" class="btn" style="background-color: var(--green);">Adicionar Servi√ßo</button>
                </form>
            </section>

            <!-- Novo card: Empr√©stimo a Funcion√°rio -->
            <section class="form-section">
                <h3>üíº Empr√©stimo a Funcion√°rio</h3>
                <form id="loan-form">
                    <div class="form-control">
                        <label for="loan-employee">Funcion√°rio</label>
                        <input type="text" id="loan-employee" placeholder="Ex: Jo√£o da Silva" required />
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="loan-amount">Valor do Empr√©stimo (R$)</label>
                            <input type="number" id="loan-amount" placeholder="0.00" step="0.01" required />
                        </div>
                        <div class="form-control">
                            <label for="loan-date">Data do Empr√©stimo</label>
                            <input type="date" id="loan-date" required />
                        </div>
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="loan-due-date">Previs√£o de Devolu√ß√£o</label>
                            <input type="date" id="loan-due-date" />
                        </div>
                        <div class="form-control">
                            <label for="loan-payment-method">Forma de Pagamento</label>
                            <select id="loan-payment-method">
                                <option value="cash">Dinheiro (Caixa)</option>
                                <option value="account">Conta Banc√°ria / Pix / Dep√≥sito</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-control">
                        <label for="loan-notes">Observa√ß√µes</label>
                        <input type="text" id="loan-notes" placeholder="Opcional: motivo, condi√ß√µes, etc." />
                    </div>

                    <button type="submit" class="btn">Registrar Empr√©stimo</button>
                </form>
            </section>
        </div>

        <div class="carousel-container">
            <section class="carousel-section history-section">
                <div class="history-header">
                    <h3>üìã Hist√≥rico</h3>
                    <input type="month" id="filter-month" title="Filtrar por m√™s">
                    <button id="clear-filter" title="Limpar filtro">Ver Todos</button>
                </div>

                

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Descri√ß√£o</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-list">
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="carousel-section history-section">
                <div class="history-header">
                    <h3>üí∞ Servi√ßos N√£o Pagos</h3>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Descri√ß√£o</th>
                                <th>Cliente</th>
                                <th>Valor</th>
                                <th>Dias em Aberto</th>
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="earned-list">
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="carousel-section history-section">
                <div class="history-header">
                    <h3>üìå Contas Pendentes</h3>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Vencimento</th>
                                <th>Descri√ß√£o</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="pending-list">
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="carousel-section history-section">
                <div class="history-header">
                    <h3>üíº Empr√©stimos a Funcion√°rios</h3>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Data Empr√©stimo</th>
                                <th>Funcion√°rio</th>
                                <th>Valor</th>
                                <th>Prev. Devolu√ß√£o</th>
                                <th>Forma</th>
                                <th>Status</th>
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="loans-list">
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <div class="charts-carousel-container">
            <section class="carousel-section chart-section">
                <h3>üìà Evolu√ß√£o do Saldo ao Longo do M√™s</h3>
                <div class="chart-container">
                    <canvas id="balanceChart"></canvas>
                </div>
            </section>

            <section class="carousel-section chart-section">
                <h3>ÔøΩ Entradas e Sa√≠das Di√°rias</h3>
                <div class="chart-container">
                    <canvas id="incomeChart"></canvas>
                </div>
            </section>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAtSOx-q5KTe0gtQjEvhMqgaJKHbqLqd90",
            authDomain: "financas-7ed0f.firebaseapp.com",
            projectId: "financas-7ed0f",
            storageBucket: "financas-7ed0f.firebasestorage.app",
            messagingSenderId: "406210800597",
            appId: "1:406210800597:web:311661359d0718a1642b5c"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.db = db;
    </script>

    <script type="module" src="script.js"></script>

</body>
</html>