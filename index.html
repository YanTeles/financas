<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro Empresarial</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’°</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>

    <header>
        <h1>Master info</h1>
        <button id="generate-pdf-btn" class="pdf-btn" title="Gerar RelatÃ³rio em PDF">ðŸ“„ RelatÃ³rio PDF</button>
    </header>

    <div class="container">
        <section class="balance-container">
            <div class="card">
                <h3>Entradas</h3>
                <p id="money-plus" class="money plus">R$ 0,00</p>
            </div>
            <div class="card">
                <h3>SaÃ­das</h3>
                <p id="money-minus" class="money minus">R$ 0,00</p>
            </div>
            <div class="card total-card">
                <h3>Saldo Atual</h3>
                <p id="balance" class="money">R$ 0,00</p>
            </div>
        </section>

        <!-- SEÃ‡ÃƒO DE ALERTAS DESTACADA -->
        <section class="alerts-container">
            <div class="alert-card pending-card">
                <h3>ðŸ“Œ Contas a Pagar</h3>
                <p id="pending-total" class="alert-amount">R$ 0,00</p>
                <p id="pending-count" class="alert-info">0 contas pendentes</p>
            </div>
            <div class="alert-card earned-card">
                <h3>ðŸ’° ServiÃ§os nÃ£o Recebidos</h3>
                <p id="earned-total" class="alert-amount">R$ 0,00</p>
                <p id="earned-count" class="alert-info">0 serviÃ§os aguardando</p>
            </div>
        </section>

        <div class="main-grid">

            <section class="form-section">
                <h3>ðŸ’¸ Nova TransaÃ§Ã£o</h3>
                <form id="form">
                    <div class="form-control">
                        <label for="text">DescriÃ§Ã£o</label>
                        <input type="text" id="text" placeholder="Ex: Venda de Software" required />
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="amount">Valor (R$)</label>
                            <input type="number" id="amount" placeholder="0.00" step="0.01" required />
                        </div>
                        <div class="form-control">
                            <label for="date">Data</label>
                            <input type="date" id="date" required />
                        </div>
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="type">Tipo</label>
                            <select id="type" required>
                                <option value="income">Entrada (+)</option>
                                <option value="expense">SaÃ­da (-)</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <label for="category">Categoria</label>
                            <select id="category" required>
                                <option value="ServiÃ§os">ServiÃ§os</option>
                                <option value="Ferramentas">Ferramentas</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Impostos">Impostos</option>
                                <option value="Outros">Outros</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn">Adicionar TransaÃ§Ã£o</button>
                </form>
            </section>

            <section class="form-section">
                <h3>ðŸ“Œ Conta Pendente</h3>
                <form id="pending-form">
                    <div class="form-control">
                        <label for="pending-text">DescriÃ§Ã£o</label>
                        <input type="text" id="pending-text" placeholder="Ex: Aluguel do escritÃ³rio" required />
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="pending-amount">Valor (R$)</label>
                            <input type="number" id="pending-amount" placeholder="0.00" step="0.01" required />
                        </div>
                        <div class="form-control">
                            <label for="pending-date">Data de Vencimento</label>
                            <input type="date" id="pending-date" required />
                        </div>
                    </div>

                    <div class="form-control">
                        <label for="pending-category">Categoria</label>
                        <select id="pending-category" required>
                            <option value="DÃ­vida">DÃ­vida</option>
                            <option value="ServiÃ§o">ServiÃ§o</option>
                            <option value="Aluguel">Aluguel</option>
                            <option value="Fornecedor">Fornecedor</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>

                    <button type="submit" class="btn" style="background-color: var(--primary);">Adicionar Conta Pendente</button>
                </form>
            </section>

            <section class="form-section">
                <h3>âœ… ServiÃ§o Realizado</h3>
                <form id="earned-form">
                    <div class="form-control">
                        <label for="earned-text">DescriÃ§Ã£o do ServiÃ§o</label>
                        <input type="text" id="earned-text" placeholder="Ex: Desenvolvimento de App" required />
                    </div>

                    <div class="form-group-row">
                        <div class="form-control">
                            <label for="earned-amount">Valor (R$)</label>
                            <input type="number" id="earned-amount" placeholder="0.00" step="0.01" required />
                        </div>
                        <div class="form-control">
                            <label for="earned-date">Data do ServiÃ§o</label>
                            <input type="date" id="earned-date" required />
                        </div>
                    </div>

                    <div class="form-control">
                        <label for="earned-client">Cliente</label>
                        <input type="text" id="earned-client" placeholder="Ex: Empresa XYZ" required />
                    </div>

                    <button type="submit" class="btn" style="background-color: var(--green);">Adicionar ServiÃ§o</button>
                </form>
            </section>
        </div>

        <div class="carousel-container">
            <section class="carousel-section history-section">
                <div class="history-header">
                    <h3>ðŸ“‹ HistÃ³rico</h3>
                    <input type="month" id="filter-month" title="Filtrar por mÃªs">
                    <button id="clear-filter" title="Limpar filtro">Ver Todos</button>
                </div>

                

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>DescriÃ§Ã£o</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>AÃ§Ã£o</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-list">
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="carousel-section history-section">
                <div class="history-header">
                    <h3>ðŸ’° ServiÃ§os NÃ£o Pagos</h3>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>DescriÃ§Ã£o</th>
                                <th>Cliente</th>
                                <th>Valor</th>
                                <th>Dias em Aberto</th>
                                <th>AÃ§Ã£o</th>
                            </tr>
                        </thead>
                        <tbody id="earned-list">
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="carousel-section history-section">
                <div class="history-header">
                    <h3>ðŸ“Œ Contas Pendentes</h3>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Vencimento</th>
                                <th>DescriÃ§Ã£o</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>AÃ§Ã£o</th>
                            </tr>
                        </thead>
                        <tbody id="pending-list">
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <section class="chart-section">
            <h3>ðŸ“ˆ EvoluÃ§Ã£o do Saldo ao Longo do MÃªs</h3>
            <div class="chart-container">
                <canvas id="balanceChart"></canvas>
            </div>
        </section>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAtSOx-q5KTe0gtQjEvhMqgaJKHbqLqd90",
            authDomain: "financas-7ed0f.firebaseapp.com",
            projectId: "financas-7ed0f",
            storageBucket: "financas-7ed0f.firebasestorage.app",
            messagingSenderId: "406210800597",
            appId: "1:406210800597:web:311661359d0718a1642b5c"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.db = db;
    </script>

    <script type="module" src="script.js"></script>

</body>
</html>